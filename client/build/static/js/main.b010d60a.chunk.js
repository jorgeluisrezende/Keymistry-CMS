(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/ajax-loader.57ca1a20.gif"},31:function(e,t,a){e.exports=a(70)},58:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),c=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(3),o=a(4),s=a(5),u=a(2),m=a(6),d=a(73),p=a(75),h=a(74),f=a(29),g=a(72),v=localStorage.getItem("token"),E=function(e){var t=e.component,a=Object(f.a)(e,["component"]);return r.a.createElement(h.a,Object.assign({},a,{render:function(e){return v?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/",state:{from:e.location}}})}}))},b=a(9),y=a.n(b),w=function(e,t){return{Authorization:"Bearer ".concat(e)}},N=function(e){return y.a.get("".concat("/api","/categories?access_token=").concat(e),{headers:w(e)})},k=(a(58),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/dashboard")}},{key:"login",value:function(e){var t=this;e.preventDefault(),function(e){return y.a.post("".concat("/api","/auth/"),e)}({email:this.refs.email.value,password:this.refs.pass.value}).then(function(e){var a=e.data;localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),setTimeout(function(){return t.props.history.push("/dashboard")},500)}).catch(function(e){var t=e.response.data.msg;window.swal("Login",t,"warning")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"login"},r.a.createElement("div",{id:"grid",className:"ui middle aligned center aligned divided grid"},r.a.createElement("div",{className:"greetings"},r.a.createElement("h1",null,"Wellcome"),r.a.createElement("span",null,"Singin to continue...")),r.a.createElement("form",{className:"ui large form",method:"POST"},r.a.createElement("div",{className:"ui"},r.a.createElement("div",{className:"field margin-bottom-0"},r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("i",{className:"user icon"}),r.a.createElement("input",{type:"text",ref:"email",className:"border-bottom-radius-0 bga",name:"email",placeholder:"E-mail address"}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui left icon input"},r.a.createElement("i",{className:"lock icon"}),r.a.createElement("input",{type:"password",ref:"pass",className:"border-top-radius-0 bga",name:"password",placeholder:"Password"}))),r.a.createElement("button",{type:"submit",className:"ui fluid large submit button",onClick:function(t){return e.login(t)}},"Login")),r.a.createElement("div",{className:"ui error message"}))))}}]),t}(n.Component)),O=a(7),j=a(71),C=(a(60),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));this.setState(Object(O.a)({},this.state,{user:e}))}},{key:"renderOnlyIfAdmin",value:function(){if("admin"===this.state.user.role)return r.a.createElement(j.a,{to:"/users",className:"item"},"Users  ",r.a.createElement("i",{className:"user outline icon"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"mg-0"},r.a.createElement("button",{className:"ui button hide-menubar"},r.a.createElement("i",{className:"bars icon mg-0"})),r.a.createElement("div",{id:"sidebar",className:"ui vertical menu mg-0"},r.a.createElement("div",{className:"avatar-box"},r.a.createElement("img",{className:"ui tiny circular image",alt:"user avatar",src:this.state.user.picture}),r.a.createElement("span",{className:"user-name"},this.state.user.name),r.a.createElement("div",null,r.a.createElement(j.a,{className:"ui button",to:"/config"},r.a.createElement("i",{className:"cog icon mg-0"})),r.a.createElement("button",{className:"ui button"},r.a.createElement("i",{className:"sign out alternate icon mg-0"})))),r.a.createElement("div",null,r.a.createElement(j.a,{to:"/dashboard",className:"item"},"Posts ",r.a.createElement("i",{className:"edit outline icon"})),r.a.createElement(j.a,{to:"/categories",className:"item "},"Categories ",r.a.createElement("i",{className:"tag icon"})),r.a.createElement(j.a,{to:"/library",className:"item"},"Media Library  ",r.a.createElement("i",{className:"images outline icon"})),this.renderOnlyIfAdmin())))}}]),t}(n.Component)),S=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderMainButton",value:function(){if(this.props.buttonText)return r.a.createElement("button",{className:"ui button cool",onClick:this.props.buttonAction},this.props.buttonIcon?r.a.createElement("i",{className:"".concat(this.props.buttonIcon," icon")}):null,this.props.buttonText)}},{key:"renderSecundaryButton",value:function(){if(this.props.secundaryButton)return r.a.createElement("button",{className:"ui button ".concat(this.props.secundaryButtonClass),onClick:this.props.buttonAction},this.props.secundaryButtonIcon?r.a.createElement("i",{className:"".concat(this.props.secundaryButtonIcon," icon")}):null,this.props.secundaryButtonText)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"header",className:"ui"},r.a.createElement("h1",{className:"title mg-0"},this.props.title),r.a.createElement("div",{className:"headr-button-box"},this.renderSecundaryButton(),this.renderMainButton())),r.a.createElement("div",{className:"ui clearing divider"}))}}]),t}(n.Component),x=(a(62),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[],token:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;try{var t=localStorage.getItem("token");(function(e){return y.a.get("".concat("/api","/posts/"),{headers:w(e)})})(t).then(function(a){e.setState(Object(O.a)({},e.state,{posts:a.data.posts,token:t}))})}catch(a){console.error(a),window.reload()}}},{key:"deletePost",value:function(e){var t=this.state.token;(function(e,t){return y.a.delete("".concat("/api","/posts/").concat(e),{headers:w(t)})})(e.id,t).then(function(e){window.location.reload()})}},{key:"renderTags",value:function(e){return e.map(function(t,a){return r.a.createElement("label",{key:a,className:"tags"},e)})}},{key:"renderPosts",value:function(){var e=this;return this.state.posts.map(function(t,a){return r.a.createElement("tr",{key:a,style:{cursor:"pointer"}},r.a.createElement("td",{onClick:function(){return e.props.history.push("/post-preview/".concat(t.id))}},t.title),r.a.createElement("td",null,t.status),r.a.createElement("td",null,t.category.name),r.a.createElement("td",null,t.author.name),r.a.createElement("td",null,e.renderTags(t.tags)),r.a.createElement("td",null,new Date(t.createdAt).toDateString()),r.a.createElement("td",{className:"actions-container"},r.a.createElement("button",{className:"ui button mg-0 twitter",onClick:function(){return e.editPost(t)}},r.a.createElement("i",{className:"edit outline icon mg-0"})),r.a.createElement("button",{className:"ui button mg-0 tomato",onClick:function(){return e.deletePost(t)}},r.a.createElement("i",{className:"trash alternate outline icon mg-0"}))))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(S,{title:"Look what you've posted so far!",buttonAction:function(){return e.props.history.push("/create-new-post")},buttonText:"Write a new post",buttonIcon:"plus"}),r.a.createElement("div",{className:"above-table"},r.a.createElement("div",{className:"ui category search"},r.a.createElement("div",{className:"ui icon input"},r.a.createElement("input",{className:"prompt",type:"text",placeholder:"Search your posts..."}),r.a.createElement("i",{className:"search icon"})),r.a.createElement("div",{className:"results"})),r.a.createElement("div",{className:"ui right floated pagination menu mb-1"},r.a.createElement("button",{className:"ui button icon item"},r.a.createElement("i",{className:"left chevron icon"})),r.a.createElement("button",{className:"ui button item"},"1"),r.a.createElement("button",{className:"ui button item"},"2"),r.a.createElement("button",{className:"ui button item"},"3"),r.a.createElement("button",{className:"ui button item"},"4"),r.a.createElement("button",{className:"ui button icon item"},r.a.createElement("i",{className:"right chevron icon"})))),r.a.createElement("table",{className:"ui very compact celled selectable table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Author"),r.a.createElement("th",null,"tags"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.renderPosts())))}}]),t}(n.Component)),A=(a(64),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0"},r.a.createElement("div",{className:"sixteen wide column content"},r.a.createElement(x,{history:this.props.history}))))}}]),t}(n.Component)),I=a(28),T=a(30),D=window.Quill.import("parchment"),U=new(function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"add",value:function(e,a){return 0===a?(this.remove(e),!0):Object(T.a)(Object(u.a)(t.prototype),"add",this).call(this,e,"".concat(a,"em"))}}]),t}(D.Attributor.Style))("indent","text-indent",{scope:D.Scope.BLOCK,whitelist:["1em","2em","3em","4em","5em","6em","7em","8em","9em"]}),P=a(25),M=a.n(P),B=window.Quill.import("delta"),W=localStorage.getItem("token"),_=function(e,t){var a=this,n=this.container.querySelector("input.ql-image[type=file]");null==n&&((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),n.classList.add("ql-image"),n.addEventListener("change",function(){if(null!=n.files&&null!=n.files[0]){var e=new FormData,t=a.quill.getSelection(!0);e.append("media",n.files[0]),a.quill.insertEmbed(t.index,"image",M.a),a.quill.setSelection(t.index+1),(r=e,i={headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(W)},responseType:"json"},console.log(r),y.a.post("".concat("/api","/media/upload"),r,i)).then(function(e){console.log(e),a.quill.deleteText(t.index,1),a.quill.updateContents((new B).retain(t.index).delete(t.length).insert({image:e.data.url}),window.Quill.sources.USER),a.quill.setSelection(t.index+1),n.value=""}).catch(function(e){window.swal("Error","Sorry an error has occurred!","error")})}var r,i}),this.container.appendChild(n)),n.click()},L=a(26),q=a(27),J=a.n(q),R=(a(66),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=window.Quill,t=e.import("attributors/style/size");t.whitelist=["14px","16px","20px","35px"],e.register(t,!0),e.register(U,!0),e.register("modules/imageDrop",L.a),e.register("modules/imageResize",J.a),e.register(e.import("attributors/style/direction"),!0),e.register(e.import("attributors/style/font"),!0),e.register(e.import("attributors/style/align"),!0),e.register(e.import("attributors/style/background"),!0),e.register(e.import("attributors/style/color"),!0);var a={modules:{toolbar:{container:[[{font:[]}],[{size:["14px","16px","20px","35px"]}],["bold","italic","underline","strike"],["blockquote"],["link"],["image"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],handlers:{image:_}},imageDrop:!0,imageResize:{displayStyles:{backgroundColor:"black",color:"white"},modules:["Resize","DisplaySize","Toolbar"]}},placeholder:"Compose an epic post here...",theme:"snow"};window.editor=new e(this.refs.editor,a)}},{key:"render",value:function(){return r.a.createElement("div",{id:"editor"},r.a.createElement("div",{id:"toolbar"}),r.a.createElement("div",{ref:"editor"}))}}]),t}(n.Component)),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},tags:[],token:"",categories:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("user"));N(t).then(function(n){var r=n.data;e.currentCategory=r[0],e.setState(Object(O.a)({},e.state,{token:t,categories:r,user:a}))})}},{key:"componentDidMount",value:function(){window.$("select.dropdown").dropdown()}},{key:"addTag",value:function(e){e.preventDefault(),this.setState(Object(O.a)({},this.state,{tags:Object(I.a)(this.state.tags).concat([this.refs.tagInput.value])})),this.refs.tagInput.value=""}},{key:"removeTag",value:function(e){var t=this.state.tags.filter(function(t,a){return a!==e});this.setState(Object(O.a)({},this.state,{tags:t}))}},{key:"renderTags",value:function(){var e=this;return this.state.tags.map(function(t,a){return r.a.createElement("label",{className:"ui label mt-1",key:a},t,"  ",r.a.createElement("i",{className:"delete icon",onClick:function(){return e.removeTag(a)}}))})}},{key:"sendPost",value:function(){var e=this.state.token;"<p><br></p>"!==window.editor.root.innerHTML&&""!==this.refs.title.value?function(e,t){return y.a.post("".concat("/api","/posts/"),e,{headers:w(t)})}({status:"waiting_publish",content:window.editor.root.innerHTML,title:this.refs.title.value,category:{id:this.currentCategory._id,name:this.currentCategory.name},tags:this.state.tags,author:this.state.user},e).then(function(e){window.location.href="/dashboard"}):window.swal("Post","Your post or your post title cannot be empty!","warning")}},{key:"loadCategories",value:function(){return this.state.categories.map(function(e,t){return r.a.createElement("option",{value:e._id,key:t},e.name)})}},{key:"changeCategory",value:function(e){var t=this;this.currentCategory=this.state.categories.filter(function(e){return e._id===t.refs.category.value})[0],console.log(this.currentCategory)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0"},r.a.createElement("div",{className:"sixteen wide column content"},r.a.createElement(S,{title:"Write a new Post",buttonText:"Publish",buttonIcon:"check",secundaryButton:!1,buttonAction:function(){return e.sendPost()}}),r.a.createElement("form",{className:"ui form"},r.a.createElement("div",{className:"fields sixteen wide column"},r.a.createElement("div",{className:"field seven wide column "},r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",ref:"title",placeholder:"Enter the title here..."})),r.a.createElement("div",{className:"field five wide column"},r.a.createElement("label",null,"Category"),r.a.createElement("select",{className:"dropdown",ref:"category",onChange:this.changeCategory.bind(this)},this.loadCategories())),r.a.createElement("div",{className:"field four wide column"},r.a.createElement("label",null,"Tags"),r.a.createElement("div",{className:"ui right labeled left icon input"},r.a.createElement("i",{className:"tags icon"}),r.a.createElement("input",{type:"text",placeholder:"Enter tags",ref:"tagInput"}),r.a.createElement("button",{type:"submit",className:"ui tag label",onClick:function(t){return e.addTag(t)}},"Add")))),this.renderTags())),r.a.createElement("div",{className:"sixteen wide column content pd-0"},r.a.createElement(R,{ref:"editor"}))))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={categories:[],token:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("token");N(t).then(function(a){var n=a.data;e.setState(Object(O.a)({},e.state,{categories:n,token:t}))})}},{key:"createCategory",value:function(e){var t=this;e.preventDefault();var a=this.state.token;(function(e){return y.a.post("".concat("/api","/categories"),e)})({access_token:a,name:this.refs.categoryName.value}).then(function(e){var a=e.data.msg,n=e.data;window.swal("Categories",a,"success");var r=t.state.categories;r.push(n.category),t.setState(Object(O.a)({},t.state,{categories:r})),t.refs.categoryName.value=""}).catch(function(e){if(e.response){var t=e.response?e.response.data.msg:null;window.swal("Categories",t,"warning")}})}},{key:"delCategory",value:function(e,t){var a=this,n=this.state.token;(function(e,t){return y.a.delete("".concat("/api","/categories/").concat(e),{headers:w(t)})})(t._id,n).then(function(e){var n=e.data.msg,r=a.state.categories.filter(function(e){return e._id!==t._id});a.setState(Object(O.a)({},a.state,{categories:r})),window.swal("Categories",n,"success")}).catch(function(e){if(e.response){var t=e.response.data.msg;window.swal("Categories",t,"warning")}else window.swal("Categories","Sorry an error has occurred!","warning")})}},{key:"renderCategories",value:function(){var e=this;return this.state.categories.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.creater),r.a.createElement("td",null,t.post_quantity),r.a.createElement("td",null,"".concat(new Date(t.createdAt).toDateString())),r.a.createElement("td",{className:"actions-container"},r.a.createElement("button",{className:"ui button mg-0 tomato",onClick:function(a){return e.delCategory(a,t)}},r.a.createElement("i",{className:"trash alternate outline icon mg-0"}))))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0"},r.a.createElement("div",{className:"sixteen wide column content"},r.a.createElement(S,{title:"Categories"}),r.a.createElement("form",{className:"ui form",method:"POST"},r.a.createElement("div",{className:"ui action input"},r.a.createElement("input",{type:"text",placeholder:"Create an category...",ref:"categoryName"}),r.a.createElement("button",{className:"ui icon button teal",onClick:function(t){return e.createCategory(t)}},"Create"))),r.a.createElement("table",{className:"ui very compact celled selectable table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Creater"),r.a.createElement("th",null,"Post quantity"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.renderCategories())))))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={count:0,users:[],token:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("token");(function(e){return y.a.get("".concat("/api","/users"),{headers:w(e)})})(t).then(function(a){e.setState(Object(O.a)({},e.state,{token:t,users:a.data.data,count:a.data.count}))}).catch(function(e){if(e.response){var t=e.response.data.msg;window.swal("Users",t,"warning")}else window.swal("Users","Sorry an error has occurred!","warning")})}},{key:"renderUsers",value:function(){var e=this,t=this.state.users,a=JSON.parse(localStorage.getItem("user"));return t.map(function(t,n){return t.id!==a.id&&r.a.createElement("tr",{key:n},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.role),r.a.createElement("td",null,t.post_quantity),r.a.createElement("td",null,t.email),r.a.createElement("td",null,r.a.createElement("button",{className:"ui button mg-0 tomato",onClick:function(a){return e.delUser(a,t)}},r.a.createElement("i",{className:"trash alternate outline icon mg-0"}))))})}},{key:"delUser",value:function(e,t){var a=this,n=this.state.token,r=this.state.users.filter(function(e){return e.id!==t.id});(function(e,t){return y.a.delete("".concat("/api","/users/").concat(e),{headers:w(t)})})(t.id,n).then(function(e){window.swal("User","User had successfuly deleted!","success"),a.setState(Object(O.a)({},a.state,{users:r}))}).catch(function(e){window.swal("User","An error has occurred, please try again later","warning")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0"},r.a.createElement("div",{className:"sixteen wide column content"},r.a.createElement(S,{title:"Your users are here!",buttonText:"Create User",buttonAction:function(){return e.props.history.push("/create-user")}}),r.a.createElement("table",{className:"ui very compact celled selectable table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Posts"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.renderUsers())))))}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tags:[],token:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("token");this.setState(Object(O.a)({},this.state,{token:e}))}},{key:"componentDidMount",value:function(){window.$("select.dropdown").dropdown()}},{key:"newUSer",value:function(){var e=this;(function(e){return y.a.post("".concat("/api","/users/"),e)})({email:this.refs.email.value,name:this.refs.name.value,password:this.refs.pass.value,role:this.refs.role.value,access_token:this.state.token}).then(function(t){window.swal("Create User","User was successfuly created!","success"),e.props.history.push("/users")}).catch(function(e){var t=e.response.data.msg;t?window.swal("Create User",t,"warning"):window.swal("Create User","Sorry an error has occured!","warning")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0"},r.a.createElement("div",{className:"sixteen wide column content"},r.a.createElement(S,{title:"Create a new User",buttonText:"Create",buttonIcon:"check",buttonAction:function(){return e.newUSer()}}),r.a.createElement("form",{className:"ui form",style:{paddingLeft:"5%"}},r.a.createElement("div",{className:"fields sixteen wide column"},r.a.createElement("div",{className:"field seven wide column "},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",ref:"name",name:"name",placeholder:"Enter the user name"})),r.a.createElement("div",{className:"field seven wide column"},r.a.createElement("label",null,"Role"),r.a.createElement("select",{className:"dropdown",ref:"role"},r.a.createElement("option",{value:"admin"},"Admin"),r.a.createElement("option",{value:"writer"},"Writer")))),r.a.createElement("div",{className:"fields sixteen wide column"},r.a.createElement("div",{className:"field seven wide column"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",name:"email",placeholder:"Enter the user email",ref:"email"})),r.a.createElement("div",{className:"field seven wide column"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter the user pass",ref:"pass"})))))))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},picture:"",token:"",apps:[],keys:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("token");(function(e){return y.a.get("".concat("/api","/applications/"),{headers:w(e)})})(a).then(function(n){var r=n.data;e.setState(Object(O.a)({},e.state,{user:t,picture:t.picture,token:a,apps:r}))})}},{key:"onChangeFileInput",value:function(){var e=this,t=this.refs.fileInput.files,a=new FileReader;a.readAsDataURL(t[0]),a.onload=(t[0],function(t){return e.setState(Object(O.a)({},e.state,{picture:t.target.result}))})}},{key:"save",value:function(e){e.preventDefault();var t=this.state,a=t.token,n=t.user,r=new FormData(this.refs.form);(function(e,t,a){return y.a.put("".concat("/api","/users/").concat(e),t,{headers:w(a)})})(n.id,r,a).then(function(e){var t=e.data;localStorage.setItem("user",JSON.stringify(t)),window.location.reload()})}},{key:"createApp",value:function(e){var t=this;e.preventDefault(),function(e,t){return y.a.post("".concat("/api","/applications/create"),e,{headers:w(t)})}({name:this.refs.appName.value},this.state.token).then(function(e){var a=t.state.apps,n={clientID:e.data.clientID,secretID:e.data.secretID};a.push({id:e.data.id,name:e.data.name,author:e.data.author}),t.setState(Object(O.a)({},t.state,{apps:a,keys:n}))}).catch(function(e){var t=e.response.data.msg;t?window.swal("Create User",t,"warning"):window.swal("Create User","Sorry an error has occured!","warning")})}},{key:"downloadKeys",value:function(){var e=JSON.stringify(this.state.keys),t=new Blob([e],{type:"text/plain"}),a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download="keys.txt",a.click()}},{key:"deleteApp",value:function(e){(function(e,t){return y.a.delete("".concat("/api","/applications/").concat(e),{headers:w(t)})})(e,this.state.token).then(function(e){window.location.reload()})}},{key:"renderApplications",value:function(){var e=this,t=this.state,a=t.apps,n=t.keys;return a.map(function(t,a){return n?r.a.createElement("div",{className:"card",key:a},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},"App Name: ",t.name),r.a.createElement("div",{className:"description"},"Author: ",t.author.name)),r.a.createElement("div",{className:"ui bottom attached button cool",onClick:function(){return e.downloadKeys()}},"Download Keys"),r.a.createElement("div",{className:"ui bottom attached button tomato",onClick:function(){return e.deleteApp(t.id)}},"remove app")):r.a.createElement("div",{className:"card",key:a},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},"App Name: ",t.name),r.a.createElement("div",{className:"description"},"Author: ",t.author.name)),r.a.createElement("div",{className:"ui bottom attached button tomato",onClick:function(){return e.deleteApp(t.id)}},"remove app"))})}},{key:"renderIfIsAdmin",value:function(){var e=this;if("admin"===this.state.user.role)return r.a.createElement("div",{className:"field eight wide column"},r.a.createElement("label",null,"Application name"),r.a.createElement("div",{className:"ui action input"},r.a.createElement("input",{type:"text",placeholder:"Web Client",ref:"appName"}),r.a.createElement("button",{className:"ui button",onClick:function(t){return e.createApp(t)}},"Create")))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0 "},r.a.createElement("div",{className:"sixteen wide column content"},r.a.createElement(S,{title:"Edit your profile"}),r.a.createElement("div",{className:"ui grid"},r.a.createElement("form",{className:"ui form seven wide column right-divider pl-5",method:"POST",ref:"form"},r.a.createElement("div",{className:"field eleven wide column column-center"},r.a.createElement("label",{htmlFor:"image",className:"ui circular image small centered image-upload"},r.a.createElement("span",{className:"image-foreground"},"Change image"),r.a.createElement("img",{src:this.state.picture,alt:"profile_picture"})),r.a.createElement("input",{id:"image",type:"file",name:"image",accept:"image/x-png,image/gif,image/jpeg",ref:"fileInput",className:"hidden",onChange:function(){return e.onChangeFileInput()}})),r.a.createElement("div",{className:"field eleven wide column"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{name:"name",ref:"name",defaultValue:this.state.user.name})),r.a.createElement("div",{className:"field eleven wide column"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",ref:"pass",type:"password"})),r.a.createElement("div",{className:"field eleven wide column"},r.a.createElement("button",{className:"fluid ui button teal",onClick:function(t){return e.save(t)}},"Save"))),r.a.createElement("form",{className:"ui form nine wide column pl-5",method:"POST"},r.a.createElement("h3",null,"Create an Application to get your api keys"),r.a.createElement("div",{className:"fields"},this.renderIfIsAdmin()),r.a.createElement("div",{className:"ui cards"},this.renderApplications()))))))}}]),t}(n.Component),$=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={post:{},token:"",user:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("token"),n=this.props.match.params.id;(function(e,t){return y.a.get("".concat("/api","/posts/").concat(e),{headers:w(t)})})(n,a).then(function(r){e.setState({post:r.data,id:n,token:a,user:t})})}},{key:"approve",value:function(){var e=this.state,t=e.token;(function(e,t,a){return y.a.put("".concat("/api","/posts/").concat(e),t,{headers:w(a)})})(e.id,{status:"published"},t).then(function(e){window.location.href="/dashboard"})}},{key:"renderHeader",value:function(){var e=this;return"admin"===this.state.user.role?r.a.createElement(S,{title:"Preview your post",buttonAction:function(){return e.approve()},buttonText:"Approve",buttonIcon:"check"}):r.a.createElement(S,{title:"Preview your post"})}},{key:"render",value:function(){var e=this.state.post;return r.a.createElement("div",{id:"page"},r.a.createElement("div",{id:"sidebar-box"},r.a.createElement(C,null)),r.a.createElement("div",{id:"main-container",className:"ui grid mg-0"},r.a.createElement("div",{className:"sixteen wide column content"},this.renderHeader(),r.a.createElement("div",{id:"post"},r.a.createElement("h2",null,e.title),r.a.createElement("div",{ref:"content",dangerouslySetInnerHTML:{__html:e.content}})))))}}]),t}(n.Component),Y=function(){return r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{path:"/",exact:!0,component:k}),r.a.createElement(E,{path:"/dashboard",exact:!0,component:A}),r.a.createElement(E,{path:"/categories",component:F}),r.a.createElement(E,{path:"/config",component:Q}),r.a.createElement(E,{path:"/users",component:H}),r.a.createElement(E,{path:"/create-user",component:K}),r.a.createElement(E,{path:"/create-new-post",component:z}),r.a.createElement(E,{path:"/post-preview/:id",component:$})))},V=(a(68),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Y,null)}}]),t}(n.Component));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.b010d60a.chunk.js.map